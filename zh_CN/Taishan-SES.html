<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"><html xmlns="http://www.w3.org/1999/xhtml" lang="" xml:lang=""><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8" /><title>SUSE® Enterprise Storage 6 on 华为 泰山 Implementation Guide</title><meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes" /><link rel="stylesheet" type="text/css" href="static/css/style.css" /><link rel="stylesheet" type="text/css" href="static/css/highlight.css" /><meta name="generator" content="DAPS 3.0.0 (https://opensuse.github.io/daps) using SUSE XSL Stylesheets 2.0.15 (based on DocBook XSL Stylesheets 1.79.2)" /><meta name="book-title" content="SUSE® Enterprise Storage 6 on 华为 泰山 Implementation Guide" />

<script type="text/javascript">

var protocol = window.location.protocol.toLowerCase();
if ( protocol != 'file:' ) {
  var agent = navigator.userAgent.toLowerCase();
  var wanted = ( protocol == 'https:') ? 'https' : 'http';
  var file = 'fonts.css';
  document.write('<link rel="stylesheet" type="text/css" href="' + wanted + '://static.opensuse.org/fonts/'+ file +'"></link>');
}
else {
   document.write('<link rel="stylesheet" type="text/css" href="static/css/fonts-onlylocal.css"></link>');
}

</script><noscript><link rel="stylesheet" type="text/css" href="http://static.opensuse.org/fonts/fonts.css" /></noscript><script src="static/js/jquery-1.10.2.min.js" type="text/javascript"></script><script src="static/js/script.js" type="text/javascript"></script><script src="static/js/highlight.min.js" type="text/javascript"></script><script>

$(document).ready(function() {
  $('.verbatim-wrap.highlight').each(function(i, block) {
    hljs.highlightBlock(block);
  });
});
hljs.configure({
  useBR: false
});

</script></head><body class="single offline js-off"><div class="bypass-block"><a href="#_content"></a></div><div id="_outer-wrap"><div id="_white-bg"><div id="_header"><div id="_logo"><img src="static/images/logo.png" alt="Logo" /></div><div class="crumbs inactive"><a class="single-crumb" href="#id-1" accesskey="c"><span class="single-contents-icon"></span>SUSE® Enterprise Storage 6 on 华为 泰山 Implementation Guide</a><div class="bubble-corner active-contents"></div></div><div class="clearme"></div></div></div><div id="_fixed-header-wrap" class="inactive"><div id="_fixed-header"><div class="crumbs inactive"><a class="single-crumb" href="#id-1" accesskey="c"><span class="single-contents-icon"></span>显示内容：SUSE® Enterprise Storage 6 on 华为 泰山 Implementation Guide</a></div><div class="buttons"><a class="top-button button" href="#">顶部</a><div class="clearme"></div></div><div class="clearme"></div></div><div class="active-contents bubble"><div class="bubble-container"><div id="_bubble-toc"><ol><li class="inactive"><a href="#_tips"><span class="number">1 </span><span class="name">Tips</span></a></li><li class="inactive"><a href="#_参考信息"><span class="number">2 </span><span class="name">参考信息</span></a></li><li class="inactive"><a href="#_设备清单"><span class="number">A </span><span class="name">设备清单</span></a></li><li class="inactive"><a href="#appendix-policy-cfg"><span class="number">B </span><span class="name">policy.cfg example</span></a></li><li class="inactive"><a href="#appendix-drive-groups-yml"><span class="number">C </span><span class="name">drive_groups.yml example</span></a></li></ol></div><div class="clearme"></div></div></div></div><div id="_toc-bubble-wrap"></div><div id="_content" class=""><div class="documentation"><div xml:lang="zh_CN" class="book" id="id-1" lang="zh_CN"><div class="titlepage"><div><div><h1 class="title">SUSE® Enterprise Storage 6 on 华为 泰山 Implementation Guide</h1></div><div><span class="imprint-label">作者: </span><span class="firstname ">Kai</span> <span class="surname ">Liu</span></div><div class="date"><span class="imprint-label">出版日期：</span>Mar 15 2020</div></div></div><div class="toc"><dl><dt><span class="chapter"><a href="#_tips"><span class="number">1 </span><span class="name">Tips</span></a></span></dt><dd><dl><dt><span class="section"><a href="#_use_a_different_ntp_server"><span class="number">1.1 </span><span class="name">Use a different NTP server</span></a></span></dt><dt><span class="section"><a href="#_copy_files_to_all_cluster_nodes"><span class="number">1.2 </span><span class="name">Copy files to all cluster nodes</span></a></span></dt><dt><span class="section"><a href="#_important_files"><span class="number">1.3 </span><span class="name">Important files</span></a></span></dt><dt><span class="section"><a href="#_how_to_completely_uninstall_the_cluster_for_reinstall"><span class="number">1.4 </span><span class="name">How to completely uninstall the cluster for reinstall</span></a></span></dt><dt><span class="section"><a href="#_how_to_get_salt_pillar_information"><span class="number">1.5 </span><span class="name">How to get salt pillar information</span></a></span></dt><dt><span class="section"><a href="#_ses_built_in_network_benchmark"><span class="number">1.6 </span><span class="name">SES built-in network benchmark</span></a></span></dt><dt><span class="section"><a href="#_ceph_built_in_osd_benchmark"><span class="number">1.7 </span><span class="name">Ceph built-in OSD benchmark</span></a></span></dt><dt><span class="section"><a href="#_ceph_built_in_pool_scope_benchmark"><span class="number">1.8 </span><span class="name">Ceph built-in pool scope benchmark</span></a></span></dt><dt><span class="section"><a href="#_interface_bonding"><span class="number">1.9 </span><span class="name">Interface bonding</span></a></span></dt><dt><span class="section"><a href="#_offline_setup"><span class="number">1.10 </span><span class="name">Offline setup</span></a></span></dt><dt><span class="section"><a href="#_change_node_roles"><span class="number">1.11 </span><span class="name">Change node roles</span></a></span></dt><dt><span class="section"><a href="#_more_tips"><span class="number">1.12 </span><span class="name">More tips</span></a></span></dt></dl></dd><dt><span class="chapter"><a href="#_参考信息"><span class="number">2 </span><span class="name">参考信息</span></a></span></dt><dt><span class="appendix"><a href="#_设备清单"><span class="number">A </span><span class="name">设备清单</span></a></span></dt><dt><span class="appendix"><a href="#appendix-policy-cfg"><span class="number">B </span><span class="name">policy.cfg example</span></a></span></dt><dt><span class="appendix"><a href="#appendix-drive-groups-yml"><span class="number">C </span><span class="name">drive_groups.yml example</span></a></span></dt></dl></div><div class="chapter " id="_tips"><div class="titlepage"><div><div><h1 class="title"><span class="number">1 </span><span xmlns:dm="urn:x-suse:ns:docmanager" class="name">Tips</span> <a title="Permalink" class="permalink" href="#_tips">#</a></h1></div></div></div><div class="line"><div class="toc"><dl><dt><span class="section"><a href="#_use_a_different_ntp_server"><span class="number">1.1 </span><span class="name">Use a different NTP server</span></a></span></dt><dt><span class="section"><a href="#_copy_files_to_all_cluster_nodes"><span class="number">1.2 </span><span class="name">Copy files to all cluster nodes</span></a></span></dt><dt><span class="section"><a href="#_important_files"><span class="number">1.3 </span><span class="name">Important files</span></a></span></dt><dt><span class="section"><a href="#_how_to_completely_uninstall_the_cluster_for_reinstall"><span class="number">1.4 </span><span class="name">How to completely uninstall the cluster for reinstall</span></a></span></dt><dt><span class="section"><a href="#_how_to_get_salt_pillar_information"><span class="number">1.5 </span><span class="name">How to get salt pillar information</span></a></span></dt><dt><span class="section"><a href="#_ses_built_in_network_benchmark"><span class="number">1.6 </span><span class="name">SES built-in network benchmark</span></a></span></dt><dt><span class="section"><a href="#_ceph_built_in_osd_benchmark"><span class="number">1.7 </span><span class="name">Ceph built-in OSD benchmark</span></a></span></dt><dt><span class="section"><a href="#_ceph_built_in_pool_scope_benchmark"><span class="number">1.8 </span><span class="name">Ceph built-in pool scope benchmark</span></a></span></dt><dt><span class="section"><a href="#_interface_bonding"><span class="number">1.9 </span><span class="name">Interface bonding</span></a></span></dt><dt><span class="section"><a href="#_offline_setup"><span class="number">1.10 </span><span class="name">Offline setup</span></a></span></dt><dt><span class="section"><a href="#_change_node_roles"><span class="number">1.11 </span><span class="name">Change node roles</span></a></span></dt><dt><span class="section"><a href="#_more_tips"><span class="number">1.12 </span><span class="name">More tips</span></a></span></dt></dl></div></div><div class="sect1" id="_use_a_different_ntp_server"><div class="titlepage"><div><div><h2 class="title" id="_use_a_different_ntp_server"><span class="number">1.1 </span><span xmlns:dm="urn:x-suse:ns:docmanager" class="name">Use a different NTP server</span> <a title="Permalink" class="permalink" href="#_use_a_different_ntp_server">#</a></h2></div></div></div><p>The default time server is the admin node. To change it, add</p><div class="verbatim-wrap"><pre class="screen">time_server: &lt;server address&gt;</pre></div><p>in cluster.yml</p></div><div class="sect1" id="_copy_files_to_all_cluster_nodes"><div class="titlepage"><div><div><h2 class="title" id="_copy_files_to_all_cluster_nodes"><span class="number">1.2 </span><span xmlns:dm="urn:x-suse:ns:docmanager" class="name">Copy files to all cluster nodes</span> <a title="Permalink" class="permalink" href="#_copy_files_to_all_cluster_nodes">#</a></h2></div></div></div><p><code class="literal">salt-cp</code> command can be used to copy files from the salt master node to minion nodes. This can be very convenient, for example, to keep /etc/hosts file in sync on all nodes.</p><div class="verbatim-wrap"><pre class="screen">salt-cp '*' /etc/hosts /etc/hosts</pre></div></div><div class="sect1" id="_important_files"><div class="titlepage"><div><div><h2 class="title" id="_important_files"><span class="number">1.3 </span><span xmlns:dm="urn:x-suse:ns:docmanager" class="name">Important files</span> <a title="Permalink" class="permalink" href="#_important_files">#</a></h2></div></div></div><div class="variablelist "><dl class="variablelist"><dt id="id-1.2.4.2.1"><span class="term ">/etc/salt/minion</span></dt><dd><p>Salt minion configuration file</p></dd><dt id="id-1.2.4.2.2"><span class="term ">/etc/salt/minion_id</span></dt><dd><p>Salt minion name. Useful if changed host name and need to change minion name accordingly.</p></dd><dt id="id-1.2.4.2.3"><span class="term ">/srv/pillar/ceph/deepsea_minions.sls</span></dt><dd><p>Deepsea minion targets</p></dd><dt id="id-1.2.4.2.4"><span class="term ">/srv/pillar/ceph/stack/ceph/cluster.yml</span></dt><dd><p>Deepsea cluster configuration for the cluster "ceph" (the default cluster name). After modification Deepsee stage 2 need to be run to make it in effect.</p></dd></dl></div><div class="variablelist "><div class="variablelist-title-wrap"><h6 class="variablelist-title"><span class="name">Cluster configuration files: </span><a title="Permalink" class="permalink" href="#id-1.2.4.3">#</a></h6></div><dl class="variablelist"><dt id="id-1.2.4.3.2"><span class="term ">/srv/pillar/ceph/stack/global.yml</span></dt><dd><p>Affects all minions in the Salt cluster.</p></dd><dt id="id-1.2.4.3.3"><span class="term ">/srv/pillar/ceph/stack/ceph/cluster.yml</span></dt><dd><p>Affects all minions in the cluster named "ceph".</p></dd><dt id="id-1.2.4.3.4"><span class="term ">/srv/pillar/ceph/stack/ceph/roles/role.yml</span></dt><dd><p>Affects all minions that are assigned the specific role in the ceph cluster.</p></dd><dt id="id-1.2.4.3.5"><span class="term ">/srv/pillar/ceph/stack/cephminions/&lt;minion ID&gt;/yml</span></dt><dd><p>Affects the individual minion.</p></dd></dl></div></div><div class="sect1" id="_how_to_completely_uninstall_the_cluster_for_reinstall"><div class="titlepage"><div><div><h2 class="title" id="_how_to_completely_uninstall_the_cluster_for_reinstall"><span class="number">1.4 </span><span xmlns:dm="urn:x-suse:ns:docmanager" class="name">How to completely uninstall the cluster for reinstall</span> <a title="Permalink" class="permalink" href="#_how_to_completely_uninstall_the_cluster_for_reinstall">#</a></h2></div></div></div><p>In case you did something wrong and would like to start over without re-installing the whole OS.</p><div class="verbatim-wrap"><pre class="screen"># salt-run disengage.safety
# salt-run state.orch ceph.purge</pre></div></div><div class="sect1" id="_how_to_get_salt_pillar_information"><div class="titlepage"><div><div><h2 class="title" id="_how_to_get_salt_pillar_information"><span class="number">1.5 </span><span xmlns:dm="urn:x-suse:ns:docmanager" class="name">How to get salt pillar information</span> <a title="Permalink" class="permalink" href="#_how_to_get_salt_pillar_information">#</a></h2></div></div></div><div class="verbatim-wrap"><pre class="screen"># salt '*' saltutil.pillar_refresh
# salt '*' pillar.items</pre></div><p>This will only give information after running stage 1 AKA the discovery stage.</p></div><div class="sect1" id="_ses_built_in_network_benchmark"><div class="titlepage"><div><div><h2 class="title" id="_ses_built_in_network_benchmark"><span class="number">1.6 </span><span xmlns:dm="urn:x-suse:ns:docmanager" class="name">SES built-in network benchmark</span> <a title="Permalink" class="permalink" href="#_ses_built_in_network_benchmark">#</a></h2></div></div></div><p><a class="link" href="https://www.suse.com/documentation/suse-enterprise-storage-5/singlehtml/book_storage_admin/book_storage_admin.html#storage.bp.performance.net_issues" target="_blank">https://www.suse.com/documentation/suse-enterprise-storage-5/singlehtml/book_storage_admin/book_storage_admin.html#storage.bp.performance.net_issues</a></p><div class="verbatim-wrap"><pre class="screen"># salt-run net.iperf cluster=ceph output=full</pre></div></div><div class="sect1" id="_ceph_built_in_osd_benchmark"><div class="titlepage"><div><div><h2 class="title" id="_ceph_built_in_osd_benchmark"><span class="number">1.7 </span><span xmlns:dm="urn:x-suse:ns:docmanager" class="name">Ceph built-in OSD benchmark</span> <a title="Permalink" class="permalink" href="#_ceph_built_in_osd_benchmark">#</a></h2></div></div></div><p><a class="link" href="https://www.suse.com/documentation/suse-enterprise-storage-5/singlehtml/book_storage_admin/book_storage_admin.html#storage.bp.performance.slowosd" target="_blank">https://www.suse.com/documentation/suse-enterprise-storage-5/singlehtml/book_storage_admin/book_storage_admin.html#storage.bp.performance.slowosd</a></p><div class="verbatim-wrap"><pre class="screen"># ceph tell osd.&lt;id&gt; bench</pre></div></div><div class="sect1" id="_ceph_built_in_pool_scope_benchmark"><div class="titlepage"><div><div><h2 class="title" id="_ceph_built_in_pool_scope_benchmark"><span class="number">1.8 </span><span xmlns:dm="urn:x-suse:ns:docmanager" class="name">Ceph built-in pool scope benchmark</span> <a title="Permalink" class="permalink" href="#_ceph_built_in_pool_scope_benchmark">#</a></h2></div></div></div><div class="verbatim-wrap"><pre class="screen"># rados -p &lt;pool name&gt; bench 60 write</pre></div></div><div class="sect1" id="_interface_bonding"><div class="titlepage"><div><div><h2 class="title" id="_interface_bonding"><span class="number">1.9 </span><span xmlns:dm="urn:x-suse:ns:docmanager" class="name">Interface bonding</span> <a title="Permalink" class="permalink" href="#_interface_bonding">#</a></h2></div></div></div><p>Use following parameters for bonding in 802.3ad mode (need switch support).
mode=802.3ad miimon=100 lacp_rate=fast xmit_hash_policy=layer3+4</p><p>Recommended Size for the BlueStore’s WAL and DB Device
<a class="link" href="https://www.suse.com/documentation/suse-enterprise-storage-5/singlehtml/book_storage_deployment/book_storage_deployment.html#about.bluestore" target="_blank">https://www.suse.com/documentation/suse-enterprise-storage-5/singlehtml/book_storage_deployment/book_storage_deployment.html#about.bluestore</a></p><p><a class="link" href="https://www.suse.com/documentation/suse-enterprise-storage-5/singlehtml/book_storage_deployment/book_storage_deployment.html#rec.waldb.size" target="_blank">https://www.suse.com/documentation/suse-enterprise-storage-5/singlehtml/book_storage_deployment/book_storage_deployment.html#rec.waldb.size</a></p></div><div class="sect1" id="_offline_setup"><div class="titlepage"><div><div><h2 class="title" id="_offline_setup"><span class="number">1.10 </span><span xmlns:dm="urn:x-suse:ns:docmanager" class="name">Offline setup</span> <a title="Permalink" class="permalink" href="#_offline_setup">#</a></h2></div></div></div><p>Setup a SMT or RMT server, and mirror below repositories from SCC.</p><div class="itemizedlist "><ul class="itemizedlist"><li class="listitem "><p>SLE-Product-SLES15-SP1-Pool</p></li><li class="listitem "><p>SLE-Product-SLES15-SP1-Updates</p></li><li class="listitem "><p>SLE-Module-Server-Applications15-SP1-Pool</p></li><li class="listitem "><p>SLE-Module-Server-Applications15-SP1-Updates</p></li><li class="listitem "><p>SLE-Module-Basesystem15-SP1-Pool</p></li><li class="listitem "><p>SLE-Module-Basesystem15-SP1-Updates</p></li><li class="listitem "><p>SUSE-Enterprise-Storage-6-Pool</p></li><li class="listitem "><p>SUSE-Enterprise-Storage-6-Updates</p></li></ul></div><p>Then point all nodes to the SMT/RMT server.</p></div><div class="sect1" id="_change_node_roles"><div class="titlepage"><div><div><h2 class="title" id="_change_node_roles"><span class="number">1.11 </span><span xmlns:dm="urn:x-suse:ns:docmanager" class="name">Change node roles</span> <a title="Permalink" class="permalink" href="#_change_node_roles">#</a></h2></div></div></div><p>After change of node roles by editing policy.cfg, need to run Stage 2 Configure to refresh configuration files.</p><div class="verbatim-wrap"><pre class="screen"># deepsea stage run ceph.stage.2</pre></div></div><div class="sect1" id="_more_tips"><div class="titlepage"><div><div><h2 class="title" id="_more_tips"><span class="number">1.12 </span><span xmlns:dm="urn:x-suse:ns:docmanager" class="name">More tips</span> <a title="Permalink" class="permalink" href="#_more_tips">#</a></h2></div></div></div><p>Check the <a class="link" href="https://documentation.suse.com/ses/6/single-html/ses-admin/#part-troubleshooting" target="_blank">SES 6 Administration Guide</a> for more hints &amp; tips, FAQ, and troubleshooting techniques.</p></div></div><div class="chapter " id="_参考信息"><div class="titlepage"><div><div><h1 class="title"><span class="number">2 </span><span xmlns:dm="urn:x-suse:ns:docmanager" class="name">参考信息</span> <a title="Permalink" class="permalink" href="#_参考信息">#</a></h1></div></div></div><div class="line"></div><div class="variablelist "><dl class="variablelist"><dt id="id-1.3.2.1"><span class="term ">SUSE Enterprise Storage Technical Overview</span></dt><dd><p><a class="link" href="https://www.suse.com/media/white-paper/suse_enterprise_storage_technical_overview_wp.pdf" target="_blank">https://www.suse.com/media/white-paper/suse_enterprise_storage_technical_overview_wp.pdf</a></p></dd><dt id="id-1.3.2.2"><span class="term ">SUSE Enterprise Storage Tech Specs</span></dt><dd><p><a class="link" href="https://www.suse.com/products/suse-enterprise-storage/#tech-specs" target="_blank">https://www.suse.com/products/suse-enterprise-storage/#tech-specs</a></p></dd><dt id="id-1.3.2.3"><span class="term ">SUSE Enterprise Storage 6 - Release Notes</span></dt><dd><p><a class="link" href="https://www.suse.com/releasenotes/x86_64/SUSE-Enterprise-Storage/6/" target="_blank">https://www.suse.com/releasenotes/x86_64/SUSE-Enterprise-Storage/6/</a></p></dd><dt id="id-1.3.2.4"><span class="term ">SUSE Enterprise Storage 6 - Deployment Guide</span></dt><dd><p><a class="link" href="https://documentation.suse.com/ses/6/single-html/ses-deployment/#book-storage-deployment" target="_blank">https://documentation.suse.com/ses/6/single-html/ses-deployment/#book-storage-deployment</a></p></dd><dt id="id-1.3.2.5"><span class="term ">SUSE Enterprise Storage 6 - Administration Guide</span></dt><dd><p><a class="link" href="https://documentation.suse.com/ses/6/single-html/ses-admin/#book-storage-admin" target="_blank">https://documentation.suse.com/ses/6/single-html/ses-admin/#book-storage-admin</a></p></dd><dt id="id-1.3.2.6"><span class="term ">SUSE Linux Enterprise Server 15 SP1 - Deployment Guide</span></dt><dd><p><a class="link" href="https://documentation.suse.com/sles/15-SP1/single-html/SLES-deployment/#book-sle-deployment" target="_blank">https://documentation.suse.com/sles/15-SP1/single-html/SLES-deployment/#book-sle-deployment</a></p></dd><dt id="id-1.3.2.7"><span class="term ">SUSE Linux Enterprise Server 15 SP1 - Administration Guide</span></dt><dd><p><a class="link" href="https://documentation.suse.com/sles/15-SP1/single-html/SLES-admin/#book-sle-admin" target="_blank">https://documentation.suse.com/sles/15-SP1/single-html/SLES-admin/#book-sle-admin</a></p></dd><dt id="id-1.3.2.8"><span class="term ">SUSE Linux Enterprise Server 15 SP1 - Storage Administration Guide</span></dt><dd><p><a class="link" href="https://documentation.suse.com/sles/15-SP1/single-html/SLES-storage/#book-storage" target="_blank">https://documentation.suse.com/sles/15-SP1/single-html/SLES-storage/#book-storage</a></p></dd><dt id="id-1.3.2.9"><span class="term ">SUSE Linux Enterprise Server 15 SP1 - Repository Mirroring Tool Guide</span></dt><dd><p><a class="link" href="https://documentation.suse.com/sles/15-SP1/single-html/SLES-rmt/#book-rmt" target="_blank">https://documentation.suse.com/sles/15-SP1/single-html/SLES-rmt/#book-rmt</a></p></dd></dl></div></div><div class="appendix " id="_设备清单"><div class="titlepage"><div><div><h1 class="title"><span class="number">A </span><span xmlns:dm="urn:x-suse:ns:docmanager" class="name">设备清单</span> <a title="Permalink" class="permalink" href="#_设备清单">#</a></h1></div></div></div><div class="line"></div><div class="informaltable"><table class="informaltable" border="1"><colgroup><col class="col_1" /><col class="col_2" /><col class="col_3" /><col class="col_4" /></colgroup><thead><tr><th align="left" valign="top">作用</th><th align="left" valign="top">数量</th><th align="left" valign="top">组件</th><th align="left" valign="top">说明</th></tr></thead><tbody><tr><td align="left" valign="top"><p>Admin Node</p></td><td align="left" valign="top"><p>1</p></td><td align="left" valign="top"><p>A VM on a 华为 x86 machine</p></td><td align="left" valign="top"><p>The node consists of:</p>
<div class="itemizedlist "><ul class="itemizedlist"><li class="listitem "><p>8x vCPU cores</p></li><li class="listitem "><p>64GB RAM</p></li><li class="listitem "><p>100GB virtual disk for OS</p></li><li class="listitem "><p>2x virtual NIC port to public and cluster network</p></li></ul></div></td></tr><tr><td align="left" valign="top"><p>OSD hosts, MON, MGR shared the OSD hosts</p></td><td align="left" valign="top"><p>4</p></td><td align="left" valign="top"><p>华为 泰山 5280</p></td><td align="left" valign="top"><p>Each node consists of:</p>
<div class="itemizedlist "><ul class="itemizedlist"><li class="listitem "><p>2x Kunpeng 920</p></li><li class="listitem "><p>256GB</p></li><li class="listitem "><p>1x Kunpeng 920 Integrated SAS Controller</p></li><li class="listitem "><p>2x 300GB SAS HDD for OS</p></li><li class="listitem "><p>34x 4TB 7.2k SATA HDD for OSD</p></li><li class="listitem "><p>2x 华为 1TB NVMe SSD for db and journal</p></li><li class="listitem "><p>1x Kunpeng 920 Embedded Network Controller - 1GbE Quad Port</p></li><li class="listitem "><p>1x Dual Port Intel 82599 10Gb Ethernet adapter</p></li></ul></div></td></tr><tr><td align="left" valign="top"><p>Software</p></td><td align="left" valign="top"><p>1</p></td><td align="left" valign="top"><p>SUSE Enterprise Storage 6 Subscription Base configuration</p></td><td align="left" valign="top"><p>Allows for 4 storage nodes and 6 infrastructure nodes</p></td></tr><tr><td align="left" valign="top"><p>Switches</p></td><td align="left" valign="top"><p>2</p></td><td align="left" valign="top"><p>华为 CE6851-48S6Q-HI</p></td><td align="left" valign="top"><p>32 Ports of 100GbE</p></td></tr></tbody></table></div></div><div class="appendix " id="appendix-policy-cfg"><div class="titlepage"><div><div><h1 class="title"><span class="number">B </span><span xmlns:dm="urn:x-suse:ns:docmanager" class="name">policy.cfg example</span> <a title="Permalink" class="permalink" href="#appendix-policy-cfg">#</a></h1></div></div></div><div class="line"></div><div class="verbatim-wrap highlight yaml"><pre class="screen">## Cluster Assignment
cluster-ceph/cluster/*.sls

## Roles
# ADMIN
role-master/cluster/admin*.sls
role-admin/cluster/admin*.sls

# Monitoring
role-prometheus/cluster/admin*.sls
role-grafana/cluster/admin*.sls

# MON
role-mon/cluster/ceph[123]*.sls

# MGR (mgrs are usually colocated with mons)
role-mgr/cluster/ceph[123]*.sls

# MDS
role-mds/cluster/ceph2*.sls

# IGW
role-igw/cluster/ceph3*.sls

# RGW
role-rgw/cluster/ceph4*.sls

# NFS
# role-ganesha/cluster/ganesha*.sls

# COMMON
config/stack/default/global.yml
config/stack/default/ceph/cluster.yml

# Storage
role-storage/cluster/ceph[1234]*.sls</pre></div></div><div class="appendix " id="appendix-drive-groups-yml"><div class="titlepage"><div><div><h1 class="title"><span class="number">C </span><span xmlns:dm="urn:x-suse:ns:docmanager" class="name">drive_groups.yml example</span> <a title="Permalink" class="permalink" href="#appendix-drive-groups-yml">#</a></h1></div></div></div><div class="line"></div><div class="verbatim-wrap highlight yaml"><pre class="screen">default:
  target: 'I@roles:storage'
  data_devices:
    # Use all hard disks as data device
    rotational: 1
  db_devices:
    # Use solid state drives as db device
    rotational: 0</pre></div></div></div></div><div class="page-bottom"><div id="_share-print"><div class="online-contents share"><strong>分享此页︰ </strong><span class="share-buttons"><span id="_share-fb" class="bottom-button">Facebook</span><span class="spacer"> • </span><span id="_share-gp" class="bottom-button">Google+</span><span class="spacer"> • </span><span id="_share-tw" class="bottom-button">Twitter</span><span class="spacer"> • </span><span id="_share-mail" class="bottom-button">电子邮件</span></span></div><div class="print"><span id="_print-button" class="bottom-button">打印此页</span></div><div class="clearme"></div></div></div></div><div id="_inward"></div></div><div id="_footer-wrap"><div id="_footer"><p>©
        2020 
        SUSE</p><ul><li><a href="http://www.suse.com/company/careers/" target="_top">职业</a></li><li><a href="http://www.suse.com/company/legal/" target="_top">法律</a></li><li><a href="http://www.suse.com/company/" target="_top">关于</a></li><li><a href="http://www.suse.com/ContactsOffices/contacts_offices.jsp" target="_top">联系我们</a></li></ul></div></div></body></html>